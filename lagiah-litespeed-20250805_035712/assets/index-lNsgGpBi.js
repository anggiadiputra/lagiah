import{D as I,r as d,y as D,E as g}from"./index-CCw3ahY3.js";const C=I("hosting",()=>{const r=d([]),l=d(null),u=d(null),o=d(!1),s=d(null),n=async(i={})=>{o.value=!0,s.value=null;try{const e=await g.getHostings(i);if(e&&e.status==="success"&&e.data)r.value=e.data?.items||[],u.value=e.data?.pagination||null;else throw new Error(e?.message||"Failed to fetch hostings.")}catch(e){s.value=e.message||"An unexpected error occurred."}finally{o.value=!1}},p=n;async function x(i){try{const e=await g.getHostingPassword(i);if(e&&e.status==="success")return e.data?.password;throw new Error(e?.message||"Failed to get hosting password.")}catch(e){throw e}}const w=async i=>{o.value=!0,s.value=null;try{const e=await g.getHostingById(i);if(e&&e.status==="success"&&e.data)return l.value=e.data,e.data;throw new Error(e?.message||`Failed to fetch hosting ${i}.`)}catch(e){return s.value=e.message||"An unexpected error occurred.",null}finally{o.value=!1}},m=async i=>{o.value=!0,s.value=null;try{if(!i||typeof i!="object")throw new Error("Invalid hosting data: data must be an object");if(!i.provider)throw new Error("Provider name is required");i.name||(i.name=i.provider);const e=Object.fromEntries(Object.entries(i).map(([a,c])=>[a,c===void 0?null:c])),t=await g.createHosting(e);if(t&&t.status==="success"&&t.data)return await n(),t;{const a=t?.error?.message||(t?.error?.issues&&t.error.issues.length>0?t.error.issues.map(c=>c.message).join(", "):"Failed to create hosting.");throw s.value=a,new Error(a)}}catch(e){let t=e.message||"An error occurred during creation.";return e.error&&e.error.issues&&(t=e.error.issues.map(a=>a.message).join(", ")),s.value=t,{status:"error",message:t,error:e}}finally{o.value=!1}},h=async(i,e)=>{o.value=!0,s.value=null;try{const t=await g.updateHosting(i,e);if(t&&t.status==="success")return await n(),t;{const a=t?.error?.message||t?.message||"Failed to update hosting.";throw s.value=a,new Error(a)}}catch(t){let a="An error occurred during update.";if(t.response&&t.response.data){const c=t.response.data;c.error&&c.error.message?a=c.error.message:c.message&&(a=c.message)}else t.message&&(a=t.message);return s.value=a,{status:"error",message:a,error:t}}finally{o.value=!1}},b=async i=>{o.value=!0,s.value=null;try{const e=await g.deleteHosting(i),t=e.data?e.data:e;if(t&&t.status==="success")return r.value=r.value.filter(a=>a.id!==i),t;{const a=t?.error?.message||t?.message||"Failed to delete hosting.";throw s.value=a,new Error(a)}}catch(e){let t="An error occurred during deletion.";if(e.response&&e.response.data){const a=e.response.data;a.error&&a.error.message?t=a.error.message:a.message&&(t=a.message)}else e.message&&(t=e.message);return s.value=t,{status:"error",message:t,error:e}}finally{o.value=!1}},v=D(()=>r.value);return{hostings:r,hostingAccounts:v,currentHosting:l,pagination:u,loading:o,error:s,fetchHostings:n,fetchHostingAccounts:p,fetchHostingById:w,createHosting:m,updateHosting:h,deleteHosting:b,getHostingPassword:x}});function y(r,l=30){if(!r)return{status:"UNKNOWN",daysUntilExpiry:null,cssClass:"bg-gray-100 text-gray-800"};const u=new Date,s=new Date(r).getTime()-u.getTime(),n=Math.ceil(s/(1e3*60*60*24));return n<0?{status:"EXPIRED",daysUntilExpiry:Math.abs(n),cssClass:"bg-red-100 text-red-800"}:n<=l?{status:"EXPIRING_SOON",daysUntilExpiry:n,cssClass:"bg-yellow-100 text-yellow-800"}:{status:"ACTIVE",daysUntilExpiry:n,cssClass:"bg-green-100 text-green-800"}}function f(r,l=7){if(!r)return{status:"UNKNOWN",daysUntilExpiry:null,cssClass:"bg-gray-100 text-gray-800"};const u=new Date,s=new Date(r).getTime()-u.getTime(),n=Math.ceil(s/(1e3*60*60*24));return n<0?{status:"EXPIRED",daysUntilExpiry:Math.abs(n),cssClass:"bg-red-100 text-red-800"}:n<=l?{status:"EXPIRING_SOON",daysUntilExpiry:n,cssClass:"bg-yellow-100 text-yellow-800"}:{status:"ACTIVE",daysUntilExpiry:n,cssClass:"bg-blue-100 text-blue-800"}}function E(r,l=7){if(!r)return{status:"UNKNOWN",daysUntilExpiry:null,cssClass:"bg-gray-100 text-gray-800"};const u=new Date,s=new Date(r).getTime()-u.getTime(),n=Math.ceil(s/(1e3*60*60*24));return n<0?{status:"EXPIRED",daysUntilExpiry:Math.abs(n),cssClass:"bg-red-100 text-red-800"}:n<=l?{status:"EXPIRING_SOON",daysUntilExpiry:n,cssClass:"bg-yellow-100 text-yellow-800"}:{status:"ACTIVE",daysUntilExpiry:n,cssClass:"bg-blue-100 text-blue-800"}}function N(r){switch(r){case"ACTIVE":return"bg-green-100 text-green-800";case"EXPIRING_SOON":return"bg-yellow-100 text-yellow-800";case"EXPIRED":return"bg-red-100 text-red-800";case"SUSPENDED":return"bg-orange-100 text-orange-800";case"CANCELLED":return"bg-gray-100 text-gray-800";case"TRANSFERRED":return"bg-blue-100 text-blue-800";case"DELETED":return"bg-gray-100 text-gray-800";default:return"bg-gray-100 text-gray-800"}}function S(r,l,u=30,o=!1,s=!1){return l?o?f(l,7).cssClass:s?E(l,7).cssClass:y(l,u).cssClass:N(r)}function O(r){return r?new Date(r).toLocaleDateString():"N/A"}function P(r,l=30,u=!1,o=!1){if(!r)return"No expiration date";if(u){const s=f(r,7);switch(s.status){case"EXPIRED":return`Expired ${s.daysUntilExpiry} days ago`;case"EXPIRING_SOON":return`Expires in ${s.daysUntilExpiry} days`;case"ACTIVE":return`Expires in ${s.daysUntilExpiry} days`;default:return"Unknown expiration"}}else if(o){const s=E(r,7);switch(s.status){case"EXPIRED":return`Expired ${s.daysUntilExpiry} days ago`;case"EXPIRING_SOON":return`Expires in ${s.daysUntilExpiry} days`;case"ACTIVE":return`Expires in ${s.daysUntilExpiry} days`;default:return"Unknown expiration"}}else{const s=y(r,l);switch(s.status){case"EXPIRED":return`Expired ${s.daysUntilExpiry} days ago`;case"EXPIRING_SOON":return`Expires in ${s.daysUntilExpiry} days`;case"ACTIVE":return`Expires in ${s.daysUntilExpiry} days`;default:return"Unknown expiration"}}}export{P as a,O as f,S as g,C as u};
