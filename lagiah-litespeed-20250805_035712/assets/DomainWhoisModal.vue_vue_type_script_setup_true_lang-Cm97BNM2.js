import{u as F,S as H,h as _,G as M,V as B,Y as $}from"./domains-mSxf9Yt0.js";import{d as E,l as U,y as w,r as R,m as T,p as D,c as L,q as l,w as m,i as u,a as e,e as d,f as x,g as P,t as r,F as z,x as G,o as i}from"./index-CCw3ahY3.js";const Y={class:"fixed inset-0 z-10 overflow-y-auto"},q={class:"flex min-h-full items-center justify-center p-4"},K={class:"flex items-center justify-between px-3 sm:px-4 py-2 sm:py-3 border-b border-gray-200"},J={key:0,class:"px-3 sm:px-4 py-2 sm:py-3"},Q={key:0,class:"flex items-center justify-center py-6"},X={key:1,class:"space-y-2"},Z={class:"flex justify-between items-center py-1.5 border-b border-gray-100"},ee={class:"text-gray-700 font-mono text-xs"},te={class:"flex justify-between items-center py-1.5 border-b border-gray-100"},se={class:"text-gray-700 text-sm"},ae={class:"flex justify-between items-center py-1.5 border-b border-gray-100"},oe={class:"text-gray-700 text-sm"},re={class:"flex justify-between items-center py-1.5 border-b border-gray-100"},ne={class:"text-gray-700 text-sm"},ie={class:"flex justify-between items-center py-1.5 border-b border-gray-100"},de={class:"text-gray-700 text-sm"},le={class:"flex justify-between items-center py-1.5 border-b border-gray-100"},me={class:"text-gray-700 text-sm"},ue={key:0,class:"space-y-1"},ce={class:"font-medium text-gray-900 text-sm"},fe={class:"text-gray-700 font-mono text-xs"},ye={class:"flex justify-between items-center py-1.5 border-b border-gray-100"},pe={class:"text-right"},ge={class:"text-gray-700 text-sm"},xe={class:"flex justify-between items-center py-1.5 border-b border-gray-100"},ve={class:"text-gray-700 text-sm"},be={class:"flex justify-between items-center py-1.5"},he={class:"text-blue-600 hover:text-blue-800 cursor-pointer text-sm"},_e={class:"flex justify-between items-center px-3 sm:px-4 py-2 sm:py-3 bg-gray-50"},we={class:"flex space-x-2"},De=["disabled"],Se=["disabled"],Ae=E({__name:"DomainWhoisModal",props:{isOpen:{type:Boolean},domain:{}},emits:["close","refresh","domain-deleted","edit-domain"],setup(S,{emit:N}){const s=S,c=N,v=F(),y=U(),a=w(()=>s.domain?.whoisData?s.domain.whoisData:null),k=w(()=>y.user&&(y.user.role==="ADMIN"||y.user.role==="STAFF")),n=R(!1),p=()=>{c("close")},A=async()=>{if(s.domain){n.value=!0;try{await v.refreshWhoisData(s.domain.id),c("refresh")}catch(o){console.error("Failed to refresh Whois data:",o)}finally{n.value=!1}}},j=async()=>{if(s.domain&&confirm(`Are you sure you want to delete domain "${s.domain.name}"? This action cannot be undone.`)){n.value=!0;try{await v.deleteDomain(s.domain.id),c("domain-deleted",s.domain.id),c("close")}catch(o){console.error("Failed to delete domain:",o),alert("Failed to delete domain. Please try again.")}finally{n.value=!1}}};T(()=>{s.isOpen&&s.domain?.name&&(console.log("Modal opened for domain:",s.domain.name),console.log("Using WHOIS data from database:",s.domain.whoisData))}),D(()=>s.isOpen,o=>{o&&s.domain?.name}),D(()=>s.domain,o=>{s.isOpen&&o?.name});const g=o=>{if(!o)return"N/A";try{return new Date(o).toISOString().split("T")[0]}catch{return"N/A"}},I=()=>a.value?.data?.["Domain ID"]?a.value.data["Domain ID"]:"N/A",C=()=>a.value?.data?.Status?a.value.data.Status:a.value?.status&&Array.isArray(a.value.status)?a.value.status.join(", "):a.value?.status&&typeof a.value.status=="string"?a.value.status:s.domain?.status||"N/A",O=()=>a.value?.data?.DNSSEC?a.value.data.DNSSEC:a.value?.dnssec?a.value.dnssec:"N/A",V=()=>s.domain?.hosting?`Hosting: ${s.domain.hosting.name} (${s.domain.hosting.provider})`:s.domain?.vps?`VPS: ${s.domain.vps.name} (${s.domain.vps.provider})`:"N/A",W=()=>a.value?.data?.["Registrar Name"]?a.value.data["Registrar Name"]:a.value?.registrar?a.value.registrar:s.domain?.registrar?s.domain.registrar:"Not available - refresh WHOIS data",b=()=>{if(a.value?.data){const o=[];for(let t=1;t<=10;t++){const f=`Nameserver ${t}`;a.value.data[f]&&o.push(a.value.data[f])}if(o.length>0)return o}return a.value?.name_servers&&Array.isArray(a.value.name_servers)?a.value.name_servers:s.domain?.nameservers||[]};return(o,t)=>(i(),L(l(H),{as:"template",show:o.isOpen},{default:m(()=>[u(l($),{as:"div",class:"relative z-50",onClose:p},{default:m(()=>[u(l(_),{as:"template",enter:"ease-out duration-300","enter-from":"opacity-0","enter-to":"opacity-100",leave:"ease-in duration-200","leave-from":"opacity-100","leave-to":"opacity-0"},{default:m(()=>t[0]||(t[0]=[e("div",{class:"fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity"},null,-1)])),_:1,__:[0]}),e("div",Y,[e("div",q,[u(l(_),{as:"template",enter:"ease-out duration-300","enter-from":"opacity-0 scale-95","enter-to":"opacity-100 scale-100",leave:"ease-in duration-200","leave-from":"opacity-100 scale-100","leave-to":"opacity-0 scale-95"},{default:m(()=>[u(l(M),{class:"w-full max-w-md sm:max-w-lg transform overflow-hidden rounded-lg bg-white shadow-xl transition-all"},{default:m(()=>[e("div",K,[u(l(B),{as:"h3",class:"text-sm sm:text-base font-semibold text-gray-900"},{default:m(()=>t[1]||(t[1]=[P(" Domain Information ")])),_:1,__:[1]}),e("button",{onClick:p,class:"text-gray-400 hover:text-gray-600 focus:outline-none"},t[2]||(t[2]=[e("svg",{class:"h-4 w-4 sm:h-5 sm:w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))]),o.domain?(i(),d("div",J,[n.value?(i(),d("div",Q,t[3]||(t[3]=[e("div",{class:"animate-spin rounded-full h-6 w-6 border-b-2 border-blue-600"},null,-1),e("span",{class:"ml-2 text-sm text-gray-600"},"Updating WHOIS data...",-1)]))):(i(),d("div",X,[e("div",Z,[t[4]||(t[4]=e("span",{class:"font-medium text-gray-900 text-sm"},"Domain ID:",-1)),e("span",ee,r(I()),1)]),e("div",te,[t[5]||(t[5]=e("span",{class:"font-medium text-gray-900 text-sm"},"Domain Name:",-1)),e("span",se,r(o.domain.name),1)]),e("div",ae,[t[6]||(t[6]=e("span",{class:"font-medium text-gray-900 text-sm"},"Created On:",-1)),e("span",oe,r(g(o.domain.registeredAt)),1)]),e("div",re,[t[7]||(t[7]=e("span",{class:"font-medium text-gray-900 text-sm"},"Last Update On:",-1)),e("span",ne,r(g(o.domain.updatedAt)),1)]),e("div",ie,[t[8]||(t[8]=e("span",{class:"font-medium text-gray-900 text-sm"},"Expiration Date:",-1)),e("span",de,r(g(o.domain.expiresAt)),1)]),e("div",le,[t[9]||(t[9]=e("span",{class:"font-medium text-gray-900 text-sm"},"Status:",-1)),e("span",me,r(C()),1)]),b().length>0?(i(),d("div",ue,[(i(!0),d(z,null,G(b(),(f,h)=>(i(),d("div",{key:h,class:"flex justify-between items-center py-1.5 border-b border-gray-100"},[e("span",ce,"Nameserver "+r(h+1)+":",1),e("span",fe,r(f),1)]))),128))])):x("",!0),e("div",ye,[t[11]||(t[11]=e("span",{class:"font-medium text-gray-900 text-sm"},"Registrar Name:",-1)),e("div",pe,[e("span",ge,r(W()),1),t[10]||(t[10]=e("div",{class:"text-xs text-gray-500 mt-1"},"From WHOIS data",-1))])]),e("div",xe,[t[12]||(t[12]=e("span",{class:"font-medium text-gray-900 text-sm"},"DNSSEC:",-1)),e("span",ve,r(O()),1)]),e("div",be,[t[13]||(t[13]=e("span",{class:"font-medium text-gray-900 text-sm"},"Hosting/VPS Info:",-1)),e("span",he,r(V()),1)])]))])):x("",!0),e("div",_e,[e("div",we,[e("button",{onClick:A,disabled:n.value,class:"px-3 py-1.5 text-xs font-medium text-red-700 bg-white border border-red-300 rounded-md hover:bg-red-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 disabled:opacity-50 disabled:cursor-not-allowed"},r(n.value?"Updating...":"Update WHOIS"),9,De),k.value?(i(),d("button",{key:0,onClick:j,disabled:n.value,class:"px-3 py-1.5 text-xs font-medium text-white bg-red-600 border border-red-600 rounded-md hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 disabled:opacity-50 disabled:cursor-not-allowed"}," Delete Domain ",8,Se)):x("",!0)]),e("button",{onClick:p,class:"px-3 py-1.5 text-xs font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500"}," Close ")])]),_:1})]),_:1})])])]),_:1})]),_:1},8,["show"]))}});export{Ae as _};
